## AWS dynamodb to Metabase

It is surprisingly hard to get data from aws dynamodb to metabase.

## Athena
Connect aws athena to metabase.
Why Athena?
Athena lets us query data in S3 using standard SQL

## Get data to S3 from dynamodb
- create a bucket in s3
- feedback-orders

## AWS Glue
- serverless data integration service
- ETL (extract, transform, and load) service
- need to use glue to change it from json to parquet file
- https://parquet.apache.org/
- build crawler
- crawler runs on JSON database in S3, exported from dynamodb


## buckets
- create bucket in s3.
- export from s3 to a bucket (JSON)
- create empty s3 bucket for parquet file 
- add data to bucket?

## buckets I created
- feedback-orders -> s3 table exported from dynamodb (JSON content)
- feedback-orders-parquet -> s3 table exported from dynamodb (parquet content)


## info
- https://www.upsolver.com/blog/amazon-data-pipeline-and-amazon-glue-evaluating-comparing-and-contrasting



## Guide
- https://www.youtube.com/watch?v=EsFSUxy7UDY
- export dynamo to s3
  - need to change format
- use glue to change format

- need two tables, 
  - one for the dynamodb json (feedback-orders)
  - one for the athena result


- export dynamo to s3
- from the dynamodb console
- select the s3 bucket you want!
 
- created a glue database (order-feedback)
- crawlers (order-feedback-crawler)
- the crawler will be on demand, since we would need to export the data from dynamodb to s3 first
- hopefully we can update that later!
- crawler runs

- athena
  - select correct glue database in the left sidebar -> order-feedback
-  


